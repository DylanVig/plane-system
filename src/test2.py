import pymavlink as mv
from pymavlink.dialects.v20 import ardupilotmega as mavlink2
from pymavlink import mavutil as mu
test = [253, 219, 14, 254, 22, 204, 1, 1, 129, 88, 170, 69, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 215, 0, 73, 0, 230, 253, 21, 228, 254, 14, 205, 1, 1, 29, 88, 170, 69, 2, 242, 64, 108, 68, 10, 215, 35, 54, 172, 13, 7, 97, 254, 14, 206, 1, 1, 137, 88, 170, 69, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 23, 0, 254, 30, 207, 1, 1, 24, 48, 133, 32, 224, 8, 0, 0, 0, 158, 254, 235, 234, 203, 206, 232, 88, 154, 233, 8, 0, 121, 0, 200, 0, 0, 0, 0, 0, 6, 10, 228, 204, 254, 12, 208, 1, 1, 2, 208, 125, 212, 30, 131, 176, 5, 0, 88, 170, 69, 2, 248, 57, 254, 28, 209, 1, 1, 163, 78, 5, 21, 187, 169, 171, 21, 187, 35, 106, 12, 187, 0, 0, 0, 0, 0, 0, 0, 0, 139, 62, 103, 57, 194, 183, 252, 58, 41, 169, 254, 44, 210, 1, 1, 164, 0, 0, 0, 0, 0, 0, 0, 0, 232, 53, 250, 189, 0, 0, 0, 0, 0, 0, 0, 0, 10, 232, 28, 193, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 158, 254, 235, 234, 203, 206, 232, 88, 159, 3, 254, 24, 211, 1, 1, 178, 14, 42]

class fifo(object):
    def __init__(self):
        self.buf = []
    def write(self, data):
        self.buf += data
        return len(data)
    def read(self):
        return self.buf.pop(0)

buf = bytes(test)

print(buf[7:10])
print((buf[9] << 16) | (buf[8] << 8) | buf[7])
mav = mu.mavlink_connection('tcp:localhost:5763')
while True:
    msg = mav.recv_msg()
    if msg:
        print(type(msg))
        print(msg)
