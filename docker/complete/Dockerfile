ARG BASE_VER
FROM cuair-x-compiler:${BASE_VER}

ARG TARGET_RUST
ARG TARGET_GCC
ARG CFLAGS

# add env vars
ENV CFLAGS=${CFLAGS}
ENV CC=${TARGET_GCC}-gcc

WORKDIR /app
RUN cargo build --target ${TARGET_RUST}
